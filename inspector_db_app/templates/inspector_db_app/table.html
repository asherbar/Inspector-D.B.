{% extends 'inspector_db_app/tables_navigator.html' %}
{% block content %}
{% include 'common/table-style.html' %}
{% if column_names %}
<div>
    <div class="table-wrap">
        <table class="table table-bordered">
            <caption style="caption-side: top;">{{table_title}}</caption>
            <thead class="thead-dark">
            <tr class="header">
                {% for column in column_names %}
                <th scope="col">{{column}}</th>
                {% endfor %}
            </tr>
            </thead>
            <tbody>
            {% for row in records %}
            <tr>
                {% for v in row %}
                <td>{{v}}</td>
                {% endfor %}
            </tr>
            {% endfor %}
            </tbody>
        </table>
    </div>
    <p></p>
    <div class="input-group mb-3">
        <div class="input-group-prepend">
            <span class="input-group-text">>></span>
        </div>
        <input type="text" class="form-control" name="query" id="query_input">
        <div class="input-group-append">
            <button class="btn btn-outline-secondary" type="button" id="execute_query">Execute Query</button>
        </div>
    </div>
    <div class="table-wrap">
        <table class="table table-bordered" id="query_result" hidden>
        </table>
    </div>
</div>
{% endif %}
{% endblock %}
{% block footer %}
<script type="text/javascript">
    $(document).ready(function() {
        $( "#execute_query" ).click(function() {
            $.get( "{% url 'query' %}", { query: $( "#query_input" ).val() }, function( data ) {
                $( "#query_result" ).empty().append( data ).removeAttr('hidden');
            });
        });
    });
</script>
{% endblock %}
